<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    body{
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 100vw;
        height: 100vh;
    }
    .container{
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 800px;
        height: 600px;
    }
    #game{
        box-shadow: 1px 1px 12px 0 rgba(0,0,0,0.5);
        border-radius: 6px;
    }
</style>
<body>
    <div class="container" id="container">
        <canvas id="game"></canvas>
    </div>
    <script>
        const canvas = document.getElementById('game');
        canvas.width = 800;
        canvas.height = 600;
        const ctx = canvas.getContext('2d');
        const cloudiOne = new Image();
        cloudiOne.src = './cloud1.png'
        const cloudiTwo = new Image();
        cloudiTwo.src = './cloud2.png'
        treeOne = new Image();
        treeOne.src = './tree1.png'
        treeTwo = new Image();
        treeTwo.src = './tree2.png'
        treeThree = new Image();
        treeThree.src = './tree3.png'
        treeFour = new Image();
        treeFour.src = './tree4.png'
        let _={
            gameStated: false,
            trees: undefined,
            backgroundTrees: undefined,
            clouds: undefined,
            backgroundClouds: undefined,
        }
        resetGame();
        function resetGame(){
            _.trees = [];
            _.backgroundTrees = [];
            const lastTree = _.backgroundTrees[_.backgroundTrees.length - 1];
            let furthestX = lastTree ? lastTree.x : 0;
            const x = 0;
        }
        function generateTree(){
            const minimunGap = 50;
            const maximumGap = 600;
            const x= _.trees.length
            ? _.trees[_.trees.length - 1].x + minimunGap + Math.floor(Math.random() * (maximumGap - minimunGap))
            : 400;
            const h= 60+Math.random()*80;
            const r1= 32+Math.random()*16;
            const r2= 32+Math.random()*16;
            const r3= 32+Math.random()*16;
            _.trees.push({x,h,r1,r2,r3})
        }
        function generateBackgroundTree(){
            const minimunGap = 30;
            const maximumGap = 150;
            const lastTree = _.backgroundTrees[_.backgroundTrees.length - 1];
            let furthestX = lastTree ? lastTree.x : 0;
            const x = furthestX + minimunGap + Math.random() * (maximumGap - minimunGap);
            _.backgroundTrees.push({x})
        }
        function drawTrees(x,h,r1,r2,r3){
            _.trees.forEach(({x,h,r1,r2,r3})=>{
                ctx.save();
                ctx.translate(x, canvas.height - h);
                ctx.drawImage(treeOne, 0, 0, 10, 100);
                ctx.restore();
            })
        }
        function draw(){
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            drawTrees();
        }
        function drawBackgroundTree(x){
            ctx.save();
            ctx.translate(x, canvas.height - 110);
            ctx.drawImage(treeOne, 0, 0, 10, 100);
            ctx.restore();
        }
        function animate(){
            generateTree();
            generateBackgroundTree();
            draw();
        }
        animate();
    </script>
</body>
</html>